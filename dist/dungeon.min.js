!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Dungeon=e():t.Dungeon=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=17)}([function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={EMPTY:0,WALL:1,FLOOR:2,DOOR:3}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(o=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&u.return&&u.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.debugRoomGrid=function(t){var e=t.roomGrid.map(function(t){return t.map(function(t){return(""+t.length).padStart(2)})});console.log(e.map(function(t){return t.join(" ")}).join("\n"))},e.debugHtmlMap=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e=Object.assign({},{empty:" ",emptyAttributes:{class:"dungeon__empty"},wall:"#",wallAttributes:{class:"dungeon__wall"},floor:"_",floorAttributes:{class:"dungeon__wall"},door:".",doorAttributes:{class:"dungeon__door"},containerAttributes:{class:"dungeon"}},e),o=t.getMappedTiles({empty:"<td "+i(n.emptyAttributes)+">"+n.empty+"</td>",floor:"<td "+i(n.floorAttributes)+">"+n.floor+"</td>",door:"<td "+i(n.doorAttributes)+">"+n.door+"</td>",wall:"<td "+i(n.wallAttributes)+">"+n.wall+"</td>"}).map(function(t){return"<tr>"+t.join("")+"</tr>"}).join(""),r="<pre "+i(n.containerAttributes)+"><table><tbody>"+o+"</tbody></table></pre>";return document.createRange().createContextualFragment(r)},e.debugMap=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=Object.assign({},{empty:" ",emptyColor:"rgb(0, 0, 0)",wall:"#",wallColor:"rgb(255, 0, 0)",floor:"_",floorColor:"rgb(210, 210, 210)",door:".",doorColor:"rgb(0, 0, 255)",fontSize:"15px"},n);var o="",i=[];o+="Dungeon: the console window should be big enough to see all of the guide on the next line:\n",o+="%c|"+"=".repeat(2*t.width-2)+"|\n\n",i.push("font-size: "+n.fontSize);for(var a=0;a<t.height;a+=1){for(var u=0;u<t.width;u+=1){var h=t.tiles[a][u];h===r.default.EMPTY?(o+="%c"+n.empty,i.push("color: "+n.emptyColor+"; font-size: "+n.fontSize)):h===r.default.WALL?(o+="%c"+n.wall,i.push("color: "+n.wallColor+"; font-size: "+n.fontSize)):h===r.default.FLOOR?(o+="%c"+n.floor,i.push("color: "+n.floorColor+"; font-size: "+n.fontSize)):h===r.default.DOOR&&(o+="%c"+n.door,i.push("color: "+n.doorColor+"; font-size: "+n.fontSize)),o+=" "}o+="\n"}(e=console).log.apply(e,[o].concat(i))};var r=function(t){return t&&t.__esModule?t:{default:t}}(n(3));var i=function(t){return Object.entries(t).map(function(t){var e=o(t,2);return e[0]+'="'+e[1]+'"'}).join(" ")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(n(3));var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=(new Date).getTime()*Math.floor(1e3*Math.random()/Math.random()*10),this.width=e,this.height=n,this.setPosition(0,0),this.doors=[],this.tiles=[];for(var o=0;o<this.height;o++){for(var i=[],a=0;a<this.width;a++)0==o||o==this.height-1||0==a||a==this.width-1?i.push(r.default.WALL):i.push(r.default.FLOOR);this.tiles.push(i)}}return o(t,[{key:"setPosition",value:function(t,e){this.x=t,this.y=e,this.left=t,this.right=t+(this.width-1),this.top=e,this.bottom=e+(this.height-1),this.centerX=t+Math.floor(this.width/2),this.centerY=e+Math.floor(this.height/2)}},{key:"getDoorLocations",value:function(){for(var t=[],e=0;e<this.height;e++)for(var n=0;n<this.width;n++)this.tiles[e][n]==r.default.DOOR&&t.push({x:n,y:e});return t}},{key:"overlaps",value:function(t){return!(this.right<t.left)&&(!(this.left>t.right)&&(!(this.bottom<t.top)&&!(this.top>t.bottom)))}},{key:"isConnectedTo",value:function(t){for(var e=this.doors,n=0;n<e.length;n++){return this.doors.map(function(t){return t.linksTo}).indexOf(t.id)>=0}return!1}}]),t}();e.default=i},function(t,e){},function(t,e,n){var o;!function(r,i){var a,u=this,h=256,s=6,f="random",l=i.pow(h,s),c=i.pow(2,52),d=2*c,m=h-1;function g(t,e,n){var o=[],g=y(function t(e,n){var o,r=[],i=typeof e;if(n&&"object"==i)for(o in e)try{r.push(t(e[o],n-1))}catch(t){}return r.length?r:"string"==i?e:e+"\0"}((e=1==e?{entropy:!0}:e||{}).entropy?[t,p(r)]:null==t?function(){try{var t;return a&&(t=a.randomBytes)?t=t(h):(t=new Uint8Array(h),(u.crypto||u.msCrypto).getRandomValues(t)),p(t)}catch(t){var e=u.navigator,n=e&&e.plugins;return[+new Date,u,n,u.screen,p(r)]}}():t,3),o),x=new function(t){var e,n=t.length,o=this,r=0,i=o.i=o.j=0,a=o.S=[];n||(t=[n++]);for(;r<h;)a[r]=r++;for(r=0;r<h;r++)a[r]=a[i=m&i+t[r%n]+(e=a[r])],a[i]=e;(o.g=function(t){for(var e,n=0,r=o.i,i=o.j,a=o.S;t--;)e=a[r=m&r+1],n=n*h+a[m&(a[r]=a[i=m&i+e])+(a[i]=e)];return o.i=r,o.j=i,n})(h)}(o),w=function(){for(var t=x.g(s),e=l,n=0;t<c;)t=(t+n)*h,e*=h,n=x.g(1);for(;t>=d;)t/=2,e/=2,n>>>=1;return(t+n)/e};return w.int32=function(){return 0|x.g(4)},w.quick=function(){return x.g(4)/4294967296},w.double=w,y(p(x.S),r),(e.pass||n||function(t,e,n,o){return o&&(o.S&&v(o,x),t.state=function(){return v(x,{})}),n?(i[f]=t,e):t})(w,g,"global"in e?e.global:this==i,e.state)}function v(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function y(t,e){for(var n,o=t+"",r=0;r<o.length;)e[m&r]=m&(n^=19*e[m&r])+o.charCodeAt(r++);return p(e)}function p(t){return String.fromCharCode.apply(0,t)}if(i["seed"+f]=g,y(i.random(),r),"object"==typeof t&&t.exports){t.exports=g;try{a=n(6)}catch(t){}}else void 0===(o=function(){return g}.call(e,n,e,t))||(t.exports=o)}([],Math)},function(t,e,n){(function(t){var o;!function(t,r,i){function a(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function u(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,o=e.d,r=e.a;return t=t<<25^t>>>7^n,n=n-o|0,o=o<<24^o>>>8^r,r=r-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-o|0,e.d=o<<16^n>>>16^r,e.a=r-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var o=0;o<n.length+20;o++)e.b^=0|n.charCodeAt(o),e.next()}(t),o=e&&e.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},r.int32=n.next,r.quick=r,o&&("object"==typeof o&&a(o,n),r.state=function(){return a(n,{})}),r}r&&r.exports?r.exports=u:n(0)&&n(1)?void 0===(o=function(){return u}.call(e,n,e,r))||(r.exports=o):this.tychei=u}(0,"object"==typeof t&&t,n(0))}).call(this,n(2)(t))},function(t,e,n){(function(t){var o;!function(t,r,i){function a(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function u(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,o=e.w,r=e.X,i=e.i;return e.w=o=o+1640531527|0,n=r[i+34&127],t=r[i=i+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=r[i]=n^t,e.i=i,n+(o^o>>>16)|0},function(t,e){var n,o,r,i,a,u=[],h=128;for(e===(0|e)?(o=e,e=null):(e+="\0",o=0,h=Math.max(h,e.length)),r=0,i=-32;i<h;++i)e&&(o^=e.charCodeAt((i+32)%e.length)),0===i&&(a=o),o^=o<<10,o^=o>>>15,o^=o<<4,o^=o>>>13,i>=0&&(a=a+1640531527|0,r=0==(n=u[127&i]^=o+a)?r+1:0);for(r>=128&&(u[127&(e&&e.length||0)]=-1),r=127,i=512;i>0;--i)o=u[r+34&127],n=u[r=r+1&127],o^=o<<13,n^=n<<17,o^=o>>>15,n^=n>>>12,u[r]=o^n;t.w=a,t.X=u,t.i=r}(e,t)}(t),o=e&&e.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},r.int32=n.next,r.quick=r,o&&(o.X&&a(o,n),r.state=function(){return a(n,{})}),r}r&&r.exports?r.exports=u:n(0)&&n(1)?void 0===(o=function(){return u}.call(e,n,e,r))||(r.exports=o):this.xor4096=u}(0,"object"==typeof t&&t,n(0))}).call(this,n(2)(t))},function(t,e,n){(function(t){var o;!function(t,r,i){function a(t,e){return e.x=t.x.slice(),e.i=t.i,e}function u(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,o=e.x,r=e.i;return t=o[r],n=(t^=t>>>7)^t<<24,n^=(t=o[r+1&7])^t>>>10,n^=(t=o[r+3&7])^t>>>3,n^=(t=o[r+4&7])^t<<7,t=o[r+7&7],n^=(t^=t<<13)^t<<9,o[r]=n,e.i=r+1&7,n},function(t,e){var n,o=[];if(e===(0|e))o[0]=e;else for(e=""+e,n=0;n<e.length;++n)o[7&n]=o[7&n]<<15^e.charCodeAt(n)+o[n+1&7]<<13;for(;o.length<8;)o.push(0);for(n=0;n<8&&0===o[n];++n);for(8==n?o[7]=-1:o[n],t.x=o,t.i=0,n=256;n>0;--n)t.next()}(e,t)}(t),o=e&&e.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},r.int32=n.next,r.quick=r,o&&(o.x&&a(o,n),r.state=function(){return a(n,{})}),r}r&&r.exports?r.exports=u:n(0)&&n(1)?void 0===(o=function(){return u}.call(e,n,e,r))||(r.exports=o):this.xorshift7=u}(0,"object"==typeof t&&t,n(0))}).call(this,n(2)(t))},function(t,e,n){(function(t){var o;!function(t,r,i){function a(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function u(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var o=0;o<n.length+64;o++)e.x^=0|n.charCodeAt(o),o==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}(t),o=e&&e.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},r.int32=n.next,r.quick=r,o&&("object"==typeof o&&a(o,n),r.state=function(){return a(n,{})}),r}r&&r.exports?r.exports=u:n(0)&&n(1)?void 0===(o=function(){return u}.call(e,n,e,r))||(r.exports=o):this.xorwow=u}(0,"object"==typeof t&&t,n(0))}).call(this,n(2)(t))},function(t,e,n){(function(t){var o;!function(t,r,i){function a(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function u(t,e){var n=new function(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var o=0;o<n.length+64;o++)e.x^=0|n.charCodeAt(o),e.next()}(t),o=e&&e.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},r.int32=n.next,r.quick=r,o&&("object"==typeof o&&a(o,n),r.state=function(){return a(n,{})}),r}r&&r.exports?r.exports=u:n(0)&&n(1)?void 0===(o=function(){return u}.call(e,n,e,r))||(r.exports=o):this.xor128=u}(0,"object"==typeof t&&t,n(0))}).call(this,n(2)(t))},function(t,e,n){(function(t){var o;!function(t,r,i){function a(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function u(t,e){var n=new function(t){var e=this,n=function(){var t=4022871197;return function(e){e=e.toString();for(var n=0;n<e.length;n++){var o=.02519603282416938*(t+=e.charCodeAt(n));o-=t=o>>>0,t=(o*=t)>>>0,t+=4294967296*(o-=t)}return 2.3283064365386963e-10*(t>>>0)}}();e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=n(" "),e.s1=n(" "),e.s2=n(" "),e.s0-=n(t),e.s0<0&&(e.s0+=1),e.s1-=n(t),e.s1<0&&(e.s1+=1),e.s2-=n(t),e.s2<0&&(e.s2+=1),n=null}(t),o=e&&e.state,r=n.next;return r.int32=function(){return 4294967296*n.next()|0},r.double=function(){return r()+1.1102230246251565e-16*(2097152*r()|0)},r.quick=r,o&&("object"==typeof o&&a(o,n),r.state=function(){return a(n,{})}),r}r&&r.exports?r.exports=u:n(0)&&n(1)?void 0===(o=function(){return u}.call(e,n,e,r))||(r.exports=o):this.alea=u}(0,"object"==typeof t&&t,n(0))}).call(this,n(2)(t))},function(t,e,n){var o=n(13),r=n(12),i=n(11),a=n(10),u=n(9),h=n(8),s=n(7);s.alea=o,s.xor128=r,s.xorwow=i,s.xorshift7=a,s.xor4096=u,s.tychei=h,t.exports=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(n(14));var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rng=(0,r.default)(e)}return o(t,[{key:"randomInteger",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.onlyOdd,r=void 0!==o&&o,i=n.onlyEven,a=void 0!==i&&i;return r?this.randomOddInteger(t,e):a?this.randomEvenInteger(t,e):Math.floor(this.rng()*(e-t+1)+t)}},{key:"randomEvenInteger",value:function(t,e){t%2!=0&&t<e&&t++,e%2!=0&&e>t&&e--;var n=(e-t)/2;return 2*Math.floor(this.rng()*(n+1))+t}},{key:"randomOddInteger",value:function(t,e){t%2==0&&t++,e%2==0&&e--;var n=(e-t)/2;return 2*Math.floor(this.rng()*(n+1))+t}},{key:"randomPick",value:function(t){return t[this.randomInteger(0,t.length-1)]}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(o=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&u.return&&u.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=s(n(15)),a=s(n(5)),u=s(n(3)),h=n(4);function s(t){return t&&t.__esModule?t:{default:t}}var f={width:50,height:50,randomSeed:void 0,chanceToLinkRooms:20,doorPadding:1,rooms:{width:{min:5,max:15,onlyOdd:!1,onlyEven:!1},height:{min:5,max:15,onlyOdd:!1,onlyEven:!1},maxArea:150,maxRooms:50}},l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.rooms||{};n.width=Object.assign({},f.rooms.width,n.width),n.height=Object.assign({},f.rooms.height,n.height),n.maxArea=n.maxArea||f.rooms.maxArea,n.maxRooms=n.maxRooms||f.rooms.maxRooms,n.width.min<3&&(n.width.min=3),n.height.min<3&&(n.height.min=3),n.width.max<n.width.min&&(n.width.max=n.width.min),n.height.max<n.height.min&&(n.height.max=n.height.min);var o=n.width.min*n.height.min;n.maxArea<o&&(n.maxArea=o),this.doorPadding=e.doorPadding||f.doorPadding,this.width=e.width||f.width,this.height=e.height||f.height,this.chanceToLinkRooms=e.chanceToLinkRooms||f.chanceToLinkRooms,this.roomConfig=n,this.rooms=[],this.r=new i.default(e.randomSeed),this.roomGrid=[],this.generate(),this.tiles=this.getTiles()}return r(t,[{key:"drawToConsole",value:function(t){(0,h.debugMap)(this,t)}},{key:"drawToHtml",value:function(t){return(0,h.debugHtmlMap)(this,t)}},{key:"generate",value:function(){this.rooms=[],this.roomGrid=[];for(var t=0;t<this.height;t++){this.roomGrid.push([]);for(var e=0;e<this.width;e++)this.roomGrid[t].push([])}var n=this.createRandomRoom();n.setPosition(Math.floor(this.width/2)-Math.floor(n.width/2),Math.floor(this.height/2)-Math.floor(n.height/2)),this.addRoom(n);for(var r=5*this.roomConfig.maxRooms;this.rooms.length<this.roomConfig.maxRooms&&r>0;)this.generateRoom(),r-=1;for(var i=0;i<this.rooms.length;i++)for(var a=this.getPotentiallyTouchingRooms(this.rooms[i]),u=0;u<a.length;u++)if(!this.rooms[i].isConnectedTo(a[u])&&Math.random()<this.chanceToLinkRooms/100){var h=this.findNewDoorLocation(this.rooms[i],a[u]),s=o(h,2),f=s[0],l=s[1];this.addDoor(f),this.addDoor(l)}}},{key:"getRoomAt",value:function(t,e){return t<0||e<0||t>=this.width||e>=this.height?null:this.roomGrid[e][t][0]}},{key:"getMappedTiles",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=Object.assign({},{empty:0,wall:1,floor:2,door:3},t),this.tiles.map(function(e){return e.map(function(e){return e===u.default.EMPTY?t.empty:e===u.default.WALL?t.wall:e===u.default.FLOOR?t.floor:e===u.default.DOOR?t.door:void 0})})}},{key:"addRoom",value:function(t){if(!this.canFitRoom(t))return!1;this.rooms.push(t);for(var e=t.top;e<=t.bottom;e++)for(var n=t.left;n<=t.right;n++)this.roomGrid[e][n].push(t);return!0}},{key:"canFitRoom",value:function(t){if(t.x<0||t.x+t.width>this.width-1)return!1;if(t.y<0||t.y+t.height>this.height-1)return!1;for(var e=0;e<this.rooms.length;e++)if(t.overlaps(this.rooms[e]))return!1;return!0}},{key:"createRandomRoom",value:function(){var t=0,e=0,n=0,o=this.roomConfig;do{n=(t=this.r.randomInteger(o.width.min,o.width.max,{onlyEven:o.width.onlyEven,onlyOdd:o.width.onlyOdd}))*(e=this.r.randomInteger(o.height.min,o.height.max,{onlyEven:o.height.onlyEven,onlyOdd:o.height.onlyOdd}))}while(n>o.maxArea);return new a.default(t,e)}},{key:"generateRoom",value:function(){for(var t=this.createRandomRoom(),e=150;e>0;){var n=this.findRoomAttachment(t);if(t.setPosition(n.x,n.y),this.addRoom(t)){var r=this.findNewDoorLocation(t,n.target),i=o(r,2),a=i[0],u=i[1];this.addDoor(a),this.addDoor(u);break}e-=1}}},{key:"getTiles",value:function(){for(var t=Array(this.height),e=0;e<this.height;e++){t[e]=Array(this.width);for(var n=0;n<this.width;n++)t[e][n]=u.default.EMPTY}for(var o=0;o<this.rooms.length;o++)for(var r=this.rooms[o],i=0;i<r.height;i++)for(var a=0;a<r.width;a++)t[i+r.y][a+r.x]=r.tiles[i][a];return t}},{key:"getPotentiallyTouchingRooms",value:function(t){for(var e=[],n=function(n,o,r){for(var i=r[o][n],a=0;a<i.length;a++)if(i[a]!=t&&e.indexOf(i[a])<0){var u=n-i[a].x,h=o-i[a].y;(u>0&&u<i[a].width-1||h>0&&h<i[a].height-1)&&e.push(i[a])}},o=t.x+1;o<t.x+t.width-1;o++)n(o,t.y,this.roomGrid),n(o,t.y+t.height,this.roomGrid);for(var r=t.y+1;r<t.y+t.height-1;r++)n(t.x,r,this.roomGrid),n(t.x+t.width,r,this.roomGrid);return e}},{key:"findNewDoorLocation",value:function(t,e){var n={x:-1,y:-1},o={x:-1,y:-1};return t.y===e.y-t.height?(n.x=o.x=this.r.randomInteger(Math.floor(Math.max(e.left,t.left)+this.doorPadding),Math.floor(Math.min(e.right,t.right)-this.doorPadding)),n.y=t.y+t.height-1,o.y=e.y):t.x==e.x-t.width?(n.x=t.x+t.width-1,o.x=e.x,n.y=o.y=this.r.randomInteger(Math.floor(Math.max(e.top,t.top)+this.doorPadding),Math.floor(Math.min(e.bottom,t.bottom)-this.doorPadding))):t.x==e.x+e.width?(n.x=t.x,o.x=e.x+e.width-1,n.y=o.y=this.r.randomInteger(Math.floor(Math.max(e.top,t.top)+this.doorPadding),Math.floor(Math.min(e.bottom,t.bottom)-this.doorPadding))):t.y==e.y+e.height&&(n.x=o.x=this.r.randomInteger(Math.floor(Math.max(e.left,t.left)+this.doorPadding),Math.floor(Math.min(e.right,t.right)-this.doorPadding)),n.y=t.y,o.y=e.y+e.height-1),n.linksTo=e.id,o.linksTo=t.id,t.doors.push(n),e.doors.push(o),[n,o]}},{key:"findRoomAttachment",value:function(t){var e=this.r.randomPick(this.rooms),n=0,o=0,r=2*this.doorPadding;switch(this.r.randomInteger(0,3)){case 0:n=this.r.randomInteger(e.left-(t.width-1)+r,e.right-r),o=e.top-t.height;break;case 1:n=e.left-t.width,o=this.r.randomInteger(e.top-(t.height-1)+r,e.bottom-r);break;case 2:n=e.right+1,o=this.r.randomInteger(e.top-(t.height-1)+r,e.bottom-r);break;case 3:n=this.r.randomInteger(e.left-(t.width-1)+r,e.right-r),o=e.bottom+1}return{x:n,y:o,target:e}}},{key:"addDoor",value:function(t){for(var e=this.roomGrid[t.y][t.x],n=0;n<e.length;n++){var o=e[n],r=t.x-o.x,i=t.y-o.y;o.tiles[i][r]=u.default.DOOR}}}]),t}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return t&&t.__esModule?t:{default:t}}(n(16));e.default=o.default}]).default});
//# sourceMappingURL=dungeon.min.js.map